/**
 * skylark-langx-events - The skylark JavaScript language extension library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./Event","./Handler"],function(t,n,i,a,e,r,s){var h=Array.prototype.slice,o=i.compact,u=t.isDefined,l=t.isPlainObject,f=t.isFunction,c=t.isString,p=(t.isEmptyObject,n.mixin);n.safeMixin;function d(t){var n=(""+t).split(".");return{name:n[0],ns:n.slice(1).join(" ")}}var v=s.inherit({on:function(t,n,i,a,e,r){var s=this,h=this._hub||(this._hub={});return l(t)?(e=a,each(t,function(t,a){s.on(t,n,i,a,e,r)}),this):(c(n)||f(a)||(e=a,a=i,i=n,n=void 0),f(i)&&(e=a,a=i,i=null),c(t)&&(t=t.split(/\s/)),t.forEach(function(t){var s=d(t),o=s.name,u=s.ns;(h[o]||(h[o]=[])).push({fn:a,selector:n,data:i,ctx:e,ns:u,one:r})}),this)},one:function(t,n,i,a,e){return this.on(t,n,i,a,e,1)},emit:function(t){if(!this._hub)return this;var n=this;c(t)&&(t=new r(t)),Object.defineProperty(t,"target",{value:this});var i=h.call(arguments,1);return i=u(i)?[t].concat(i):[t],[t.type||t.name,"all"].forEach(function(a){var e=d(a),r=e.name,s=e.ns,h=n._hub[r];if(h){for(var u=h.length,l=!1,f=0;f<u;f++){if(t.isImmediatePropagationStopped&&t.isImmediatePropagationStopped())return this;var c=h[f];(!s||c.ns&&c.ns.startsWith(s))&&(t.data?c.data&&(t.data=p({},c.data,t.data)):t.data=c.data||null,c.fn.apply(c.ctx,i),c.one&&(h[f]=null,l=!0))}l&&(n._hub[a]=o(h))}}),this},listened:function(t){return((this._hub||(this._events={}))[t]||[]).length>0},off:function(t,n){var i=this._hub||(this._hub={});return c(t)&&(t=t.split(/\s/)),t.forEach(function(t){var a=d(t),e=a.name,r=a.ns,s=i[e];if(s){var h=[];if(n||r)for(var o=0,u=s.length;o<u;o++)n&&s[o].fn!==n&&s[o].fn._!==n?h.push(s[o]):!r||s[o].ns&&0==s[o].ns.indexOf(r)||h.push(s[o]);h.length?i[e]=h:delete i[e]}}),this},trigger:function(){return this.emit.apply(this,arguments)}});return e.Emitter=v});
//# sourceMappingURL=sourcemaps/Emitter.js.map
