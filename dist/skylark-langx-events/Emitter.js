/**
 * skylark-langx-events - The skylark JavaScript language extension library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./Event","./Listener"],function(t,n,i,e,a,s,r){var h=Array.prototype.slice,o=i.compact,u=t.isDefined,l=t.isPlainObject,f=t.isFunction,c=t.isString,p=(t.isEmptyObject,n.mixin);n.safeMixin;function d(t){var n=(""+t).split(".");return{name:n[0],ns:n.slice(1).join(" ")}}var v=r.inherit({on:function(t,n,i,e,a,s){var r=this,h=this._hub||(this._hub={});return l(t)?(a=e,each(t,function(t,e){r.on(t,n,i,e,a,s)}),this):(c(n)||f(e)||(a=e,e=i,i=n,n=void 0),f(i)&&(a=e,e=i,i=null),c(t)&&(t=t.split(/\s/)),t.forEach(function(t){var r=d(t),o=r.name,u=r.ns;(h[o]||(h[o]=[])).push({fn:e,selector:n,data:i,ctx:a,ns:u,one:s})}),this)},one:function(t,n,i,e,a){return this.on(t,n,i,e,a,1)},emit:function(t){if(!this._hub)return this;var n=this;c(t)&&(t=new s(t)),Object.defineProperty(t,"target",{value:this});var i=h.call(arguments,1);return i=u(i)?[t].concat(i):[t],[t.type||t.name,"all"].forEach(function(e){var a=d(e),s=a.name,r=a.ns,h=n._hub[s];if(h){for(var u=h.length,l=!1,f=0;f<u;f++){if(t.isImmediatePropagationStopped&&t.isImmediatePropagationStopped())return this;var c=h[f];(!r||c.ns&&c.ns.startsWith(r))&&(t.data?c.data&&(t.data=p({},c.data,t.data)):t.data=c.data||null,c.fn.apply(c.ctx,i),c.one&&(h[f]=null,l=!0))}l&&(n._hub[e]=o(h))}}),this},listened:function(t){return((this._hub||(this._events={}))[t]||[]).length>0},off:function(t,n){var i=this._hub||(this._hub={});return c(t)&&(t=t.split(/\s/)),t.forEach(function(t){var e=d(t),a=e.name,s=e.ns,r=i[a];if(r){var h=[];if(n||s)for(var o=0,u=r.length;o<u;o++)n&&r[o].fn!==n&&r[o].fn._!==n?h.push(r[o]):!s||r[o].ns&&0==r[o].ns.indexOf(s)||h.push(r[o]);h.length?i[a]=h:delete i[a]}}),this},trigger:function(){return this.emit.apply(this,arguments)}});return a.Emitter=v});
//# sourceMappingURL=sourcemaps/Emitter.js.map
